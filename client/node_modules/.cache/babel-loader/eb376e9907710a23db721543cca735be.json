{"ast":null,"code":"import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/objectWithoutPropertiesLoose\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inheritsLoose from \"@babel/runtime/helpers/inheritsLoose\";\nimport _mapValues from \"lodash/mapValues\";\nimport React, { Component, createElement } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport createFieldArrayProps from './createFieldArrayProps';\nimport plain from './structure/plain';\nimport validateComponentProp from './util/validateComponentProp';\nvar propsToNotUpdateFor = ['_reduxForm', 'value'];\nexport default function createConnectedFieldArray(structure) {\n  var deepEqual = structure.deepEqual,\n      getIn = structure.getIn,\n      size = structure.size,\n      equals = structure.equals,\n      orderChanged = structure.orderChanged;\n\n  var getSyncError = function getSyncError(syncErrors, name) {\n    // For an array, the error can _ONLY_ be under _error.\n    // This is why this getSyncError is not the same as the\n    // one in Field.\n    return plain.getIn(syncErrors, name + \"._error\");\n  };\n\n  var getSyncWarning = function getSyncWarning(syncWarnings, name) {\n    // For an array, the warning can _ONLY_ be under _warning.\n    // This is why this getSyncError is not the same as the\n    // one in Field.\n    return getIn(syncWarnings, name + \"._warning\");\n  };\n\n  var ConnectedFieldArray = /*#__PURE__*/function (_Component) {\n    _inheritsLoose(ConnectedFieldArray, _Component);\n\n    function ConnectedFieldArray() {\n      var _this;\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      _this = _Component.call.apply(_Component, [this].concat(args)) || this;\n      _this.ref = React.createRef();\n\n      _this.getValue = function (index) {\n        return _this.props.value && getIn(_this.props.value, String(index));\n      };\n\n      return _this;\n    }\n\n    var _proto = ConnectedFieldArray.prototype;\n\n    _proto.shouldComponentUpdate = function shouldComponentUpdate(nextProps) {\n      var _this2 = this; // Update if the elements of the value array was updated.\n\n\n      var thisValue = this.props.value;\n      var nextValue = nextProps.value;\n\n      if (thisValue && nextValue) {\n        var nextValueItemsSame = equals(nextValue, thisValue); //.every(val => ~thisValue.indexOf(val))\n\n        var nextValueItemsOrderChanged = orderChanged(thisValue, nextValue);\n        var thisValueLength = thisValue.length || thisValue.size;\n        var nextValueLength = nextValue.length || nextValue.size;\n\n        if (thisValueLength !== nextValueLength || nextValueItemsSame && nextValueItemsOrderChanged || nextProps.rerenderOnEveryChange && thisValue.some(function (val, index) {\n          return !deepEqual(val, nextValue[index]);\n        })) {\n          return true;\n        }\n      }\n\n      var nextPropsKeys = Object.keys(nextProps);\n      var thisPropsKeys = Object.keys(this.props); // if we have children, we MUST update in React 16\n      // https://twitter.com/erikras/status/915866544558788608\n\n      return !!(this.props.children || nextProps.children || nextPropsKeys.length !== thisPropsKeys.length || nextPropsKeys.some(function (prop) {\n        // useful to debug rerenders\n        // if (!plain.deepEqual(this.props[ prop ], nextProps[ prop ])) {\n        //   console.info(prop, 'changed', this.props[ prop ], '==>', nextProps[ prop ])\n        // }\n        return !~propsToNotUpdateFor.indexOf(prop) && !deepEqual(_this2.props[prop], nextProps[prop]);\n      }));\n    };\n\n    _proto.getRenderedComponent = function getRenderedComponent() {\n      return this.ref.current;\n    };\n\n    _proto.render = function render() {\n      var _this$props = this.props,\n          component = _this$props.component,\n          forwardRef = _this$props.forwardRef,\n          name = _this$props.name,\n          _reduxForm = _this$props._reduxForm,\n          validate = _this$props.validate,\n          warn = _this$props.warn,\n          rerenderOnEveryChange = _this$props.rerenderOnEveryChange,\n          rest = _objectWithoutPropertiesLoose(_this$props, [\"component\", \"forwardRef\", \"name\", \"_reduxForm\", \"validate\", \"warn\", \"rerenderOnEveryChange\"]);\n\n      var props = createFieldArrayProps(structure, name, _reduxForm.form, _reduxForm.sectionPrefix, this.getValue, rest);\n\n      if (forwardRef) {\n        props.ref = this.ref;\n      }\n\n      return createElement(component, props);\n    };\n\n    _createClass(ConnectedFieldArray, [{\n      key: \"dirty\",\n      get: function get() {\n        return this.props.dirty;\n      }\n    }, {\n      key: \"pristine\",\n      get: function get() {\n        return this.props.pristine;\n      }\n    }, {\n      key: \"value\",\n      get: function get() {\n        return this.props.value;\n      }\n    }]);\n\n    return ConnectedFieldArray;\n  }(Component);\n\n  ConnectedFieldArray.propTypes = {\n    component: validateComponentProp,\n    props: PropTypes.object,\n    rerenderOnEveryChange: PropTypes.bool\n  };\n  ConnectedFieldArray.defaultProps = {\n    rerenderOnEveryChange: false\n  };\n  var connector = connect(function (state, ownProps) {\n    var name = ownProps.name,\n        _ownProps$_reduxForm = ownProps._reduxForm,\n        initialValues = _ownProps$_reduxForm.initialValues,\n        getFormState = _ownProps$_reduxForm.getFormState;\n    var formState = getFormState(state);\n    var initial = getIn(formState, \"initial.\" + name) || initialValues && getIn(initialValues, name);\n    var value = getIn(formState, \"values.\" + name);\n    var submitting = getIn(formState, 'submitting');\n    var syncError = getSyncError(getIn(formState, 'syncErrors'), name);\n    var syncWarning = getSyncWarning(getIn(formState, 'syncWarnings'), name);\n    var pristine = deepEqual(value, initial);\n    return {\n      asyncError: getIn(formState, \"asyncErrors.\" + name + \"._error\"),\n      dirty: !pristine,\n      pristine: pristine,\n      state: getIn(formState, \"fields.\" + name),\n      submitError: getIn(formState, \"submitErrors.\" + name + \"._error\"),\n      submitFailed: getIn(formState, 'submitFailed'),\n      submitting: submitting,\n      syncError: syncError,\n      syncWarning: syncWarning,\n      value: value,\n      length: size(value)\n    };\n  }, function (dispatch, ownProps) {\n    var name = ownProps.name,\n        _reduxForm = ownProps._reduxForm;\n    var arrayInsert = _reduxForm.arrayInsert,\n        arrayMove = _reduxForm.arrayMove,\n        arrayPop = _reduxForm.arrayPop,\n        arrayPush = _reduxForm.arrayPush,\n        arrayRemove = _reduxForm.arrayRemove,\n        arrayRemoveAll = _reduxForm.arrayRemoveAll,\n        arrayShift = _reduxForm.arrayShift,\n        arraySplice = _reduxForm.arraySplice,\n        arraySwap = _reduxForm.arraySwap,\n        arrayUnshift = _reduxForm.arrayUnshift;\n    return _mapValues({\n      arrayInsert: arrayInsert,\n      arrayMove: arrayMove,\n      arrayPop: arrayPop,\n      arrayPush: arrayPush,\n      arrayRemove: arrayRemove,\n      arrayRemoveAll: arrayRemoveAll,\n      arrayShift: arrayShift,\n      arraySplice: arraySplice,\n      arraySwap: arraySwap,\n      arrayUnshift: arrayUnshift\n    }, function (actionCreator) {\n      return bindActionCreators(actionCreator.bind(null, name), dispatch);\n    });\n  }, undefined, {\n    forwardRef: true\n  });\n  return connector(ConnectedFieldArray);\n}","map":{"version":3,"sources":["C:/Users/gethi/Desktop/React Apps/streams/client/node_modules/redux-form/es/ConnectedFieldArray.js"],"names":["_objectWithoutPropertiesLoose","_createClass","_inheritsLoose","_mapValues","React","Component","createElement","PropTypes","connect","bindActionCreators","createFieldArrayProps","plain","validateComponentProp","propsToNotUpdateFor","createConnectedFieldArray","structure","deepEqual","getIn","size","equals","orderChanged","getSyncError","syncErrors","name","getSyncWarning","syncWarnings","ConnectedFieldArray","_Component","_this","_len","arguments","length","args","Array","_key","call","apply","concat","ref","createRef","getValue","index","props","value","String","_proto","prototype","shouldComponentUpdate","nextProps","_this2","thisValue","nextValue","nextValueItemsSame","nextValueItemsOrderChanged","thisValueLength","nextValueLength","rerenderOnEveryChange","some","val","nextPropsKeys","Object","keys","thisPropsKeys","children","prop","indexOf","getRenderedComponent","current","render","_this$props","component","forwardRef","_reduxForm","validate","warn","rest","form","sectionPrefix","key","get","dirty","pristine","propTypes","object","bool","defaultProps","connector","state","ownProps","_ownProps$_reduxForm","initialValues","getFormState","formState","initial","submitting","syncError","syncWarning","asyncError","submitError","submitFailed","dispatch","arrayInsert","arrayMove","arrayPop","arrayPush","arrayRemove","arrayRemoveAll","arrayShift","arraySplice","arraySwap","arrayUnshift","actionCreator","bind","undefined"],"mappings":"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","sourcesContent":["import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/objectWithoutPropertiesLoose\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inheritsLoose from \"@babel/runtime/helpers/inheritsLoose\";\nimport _mapValues from \"lodash/mapValues\";\nimport React, { Component, createElement } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport createFieldArrayProps from './createFieldArrayProps';\nimport plain from './structure/plain';\nimport validateComponentProp from './util/validateComponentProp';\nvar propsToNotUpdateFor = ['_reduxForm', 'value'];\nexport default function createConnectedFieldArray(structure) {\n  var deepEqual = structure.deepEqual,\n      getIn = structure.getIn,\n      size = structure.size,\n      equals = structure.equals,\n      orderChanged = structure.orderChanged;\n\n  var getSyncError = function getSyncError(syncErrors, name) {\n    // For an array, the error can _ONLY_ be under _error.\n    // This is why this getSyncError is not the same as the\n    // one in Field.\n    return plain.getIn(syncErrors, name + \"._error\");\n  };\n\n  var getSyncWarning = function getSyncWarning(syncWarnings, name) {\n    // For an array, the warning can _ONLY_ be under _warning.\n    // This is why this getSyncError is not the same as the\n    // one in Field.\n    return getIn(syncWarnings, name + \"._warning\");\n  };\n\n  var ConnectedFieldArray =\n  /*#__PURE__*/\n  function (_Component) {\n    _inheritsLoose(ConnectedFieldArray, _Component);\n\n    function ConnectedFieldArray() {\n      var _this;\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      _this = _Component.call.apply(_Component, [this].concat(args)) || this;\n      _this.ref = React.createRef();\n\n      _this.getValue = function (index) {\n        return _this.props.value && getIn(_this.props.value, String(index));\n      };\n\n      return _this;\n    }\n\n    var _proto = ConnectedFieldArray.prototype;\n\n    _proto.shouldComponentUpdate = function shouldComponentUpdate(nextProps) {\n      var _this2 = this;\n\n      // Update if the elements of the value array was updated.\n      var thisValue = this.props.value;\n      var nextValue = nextProps.value;\n\n      if (thisValue && nextValue) {\n        var nextValueItemsSame = equals(nextValue, thisValue); //.every(val => ~thisValue.indexOf(val))\n\n        var nextValueItemsOrderChanged = orderChanged(thisValue, nextValue);\n        var thisValueLength = thisValue.length || thisValue.size;\n        var nextValueLength = nextValue.length || nextValue.size;\n\n        if (thisValueLength !== nextValueLength || nextValueItemsSame && nextValueItemsOrderChanged || nextProps.rerenderOnEveryChange && thisValue.some(function (val, index) {\n          return !deepEqual(val, nextValue[index]);\n        })) {\n          return true;\n        }\n      }\n\n      var nextPropsKeys = Object.keys(nextProps);\n      var thisPropsKeys = Object.keys(this.props); // if we have children, we MUST update in React 16\n      // https://twitter.com/erikras/status/915866544558788608\n\n      return !!(this.props.children || nextProps.children || nextPropsKeys.length !== thisPropsKeys.length || nextPropsKeys.some(function (prop) {\n        // useful to debug rerenders\n        // if (!plain.deepEqual(this.props[ prop ], nextProps[ prop ])) {\n        //   console.info(prop, 'changed', this.props[ prop ], '==>', nextProps[ prop ])\n        // }\n        return !~propsToNotUpdateFor.indexOf(prop) && !deepEqual(_this2.props[prop], nextProps[prop]);\n      }));\n    };\n\n    _proto.getRenderedComponent = function getRenderedComponent() {\n      return this.ref.current;\n    };\n\n    _proto.render = function render() {\n      var _this$props = this.props,\n          component = _this$props.component,\n          forwardRef = _this$props.forwardRef,\n          name = _this$props.name,\n          _reduxForm = _this$props._reduxForm,\n          validate = _this$props.validate,\n          warn = _this$props.warn,\n          rerenderOnEveryChange = _this$props.rerenderOnEveryChange,\n          rest = _objectWithoutPropertiesLoose(_this$props, [\"component\", \"forwardRef\", \"name\", \"_reduxForm\", \"validate\", \"warn\", \"rerenderOnEveryChange\"]);\n\n      var props = createFieldArrayProps(structure, name, _reduxForm.form, _reduxForm.sectionPrefix, this.getValue, rest);\n\n      if (forwardRef) {\n        props.ref = this.ref;\n      }\n\n      return createElement(component, props);\n    };\n\n    _createClass(ConnectedFieldArray, [{\n      key: \"dirty\",\n      get: function get() {\n        return this.props.dirty;\n      }\n    }, {\n      key: \"pristine\",\n      get: function get() {\n        return this.props.pristine;\n      }\n    }, {\n      key: \"value\",\n      get: function get() {\n        return this.props.value;\n      }\n    }]);\n\n    return ConnectedFieldArray;\n  }(Component);\n\n  ConnectedFieldArray.propTypes = {\n    component: validateComponentProp,\n    props: PropTypes.object,\n    rerenderOnEveryChange: PropTypes.bool\n  };\n  ConnectedFieldArray.defaultProps = {\n    rerenderOnEveryChange: false\n  };\n  var connector = connect(function (state, ownProps) {\n    var name = ownProps.name,\n        _ownProps$_reduxForm = ownProps._reduxForm,\n        initialValues = _ownProps$_reduxForm.initialValues,\n        getFormState = _ownProps$_reduxForm.getFormState;\n    var formState = getFormState(state);\n    var initial = getIn(formState, \"initial.\" + name) || initialValues && getIn(initialValues, name);\n    var value = getIn(formState, \"values.\" + name);\n    var submitting = getIn(formState, 'submitting');\n    var syncError = getSyncError(getIn(formState, 'syncErrors'), name);\n    var syncWarning = getSyncWarning(getIn(formState, 'syncWarnings'), name);\n    var pristine = deepEqual(value, initial);\n    return {\n      asyncError: getIn(formState, \"asyncErrors.\" + name + \"._error\"),\n      dirty: !pristine,\n      pristine: pristine,\n      state: getIn(formState, \"fields.\" + name),\n      submitError: getIn(formState, \"submitErrors.\" + name + \"._error\"),\n      submitFailed: getIn(formState, 'submitFailed'),\n      submitting: submitting,\n      syncError: syncError,\n      syncWarning: syncWarning,\n      value: value,\n      length: size(value)\n    };\n  }, function (dispatch, ownProps) {\n    var name = ownProps.name,\n        _reduxForm = ownProps._reduxForm;\n    var arrayInsert = _reduxForm.arrayInsert,\n        arrayMove = _reduxForm.arrayMove,\n        arrayPop = _reduxForm.arrayPop,\n        arrayPush = _reduxForm.arrayPush,\n        arrayRemove = _reduxForm.arrayRemove,\n        arrayRemoveAll = _reduxForm.arrayRemoveAll,\n        arrayShift = _reduxForm.arrayShift,\n        arraySplice = _reduxForm.arraySplice,\n        arraySwap = _reduxForm.arraySwap,\n        arrayUnshift = _reduxForm.arrayUnshift;\n    return _mapValues({\n      arrayInsert: arrayInsert,\n      arrayMove: arrayMove,\n      arrayPop: arrayPop,\n      arrayPush: arrayPush,\n      arrayRemove: arrayRemove,\n      arrayRemoveAll: arrayRemoveAll,\n      arrayShift: arrayShift,\n      arraySplice: arraySplice,\n      arraySwap: arraySwap,\n      arrayUnshift: arrayUnshift\n    }, function (actionCreator) {\n      return bindActionCreators(actionCreator.bind(null, name), dispatch);\n    });\n  }, undefined, {\n    forwardRef: true\n  });\n  return connector(ConnectedFieldArray);\n}"]},"metadata":{},"sourceType":"module"}